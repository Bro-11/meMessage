<title>meMessage</title><link rel=icon href="data:image/webp;base64,UklGRnABAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSGMAAAABcFzbtpr8eCpKCcGhASrQKR24w8jd3d29KbfbQkRMAKE1sep4OhkNm7moniF0+nF//NlkpAco2xG/Ayl6kW4AmQQft/8WwQc4h2ZYABm7kJIBsfHD/4YcEU3N/fn6uS4ZOQIAVlA4IOYAAADwAwCdASoQABAAAIAOJbACdLcAUIBz0XsQkqL8Xz1VBwrnAASRObukAP763tFhdTh/zPdUeP+a4AX5Bh1r8D7cunhn6x+RMUCzeN3xfQ23Ls9whhxS6VjLm7g0dobIGy0L+m9I3cre9/Gwhu6js+wexar/625kgd2MDtLleXmIWjwh5T+eOQFev1UEYzFEsZMwAJXTrsKbTao/xPb+lxYIc538Zfd2Xuj8bxn+af8e7zCX+sv2JgCf//h/tbatAOud//29+/V9xxQ4QX/q/4GkzDmPb/7gZYE86w3/zcMRmnNE4AAAAA=="><center><h1 id=title>Loading...</h1></center><div id=messages></div><div id=chats></div><input id=type placeholder="new meMessage..."maxlength=200><button id=sendBtn onclick=send()><svg width=17px height=17px viewBox="0 0 64 64"fill=none xmlns=http://www.w3.org/2000/svg style=vertical-align:middle><path d="M32 4V60M32 4L8 28M32 4L56 28"stroke=currentColor stroke-width=12 stroke-linecap=round stroke-linejoin=round /></svg></button><button id=nameBtn onclick=changeName()>Change Chat Name</button><script>var url="https://retoolapi.dev/09OX6R/messages/5",max=0,lastDataHash="";localStorage.meMsgUser&&"null"!=localStorage.meMsgUser||(localStorage.meMsgUser=prompt("Enter your first name...  (This is your display username, you cannot change it once it is set!)"),window.location.reload());var passes,username=localStorage.meMsgUser,chatDiv=document.querySelector("#chats");async function init(){await updatePasses();for(var e=1;e<=149;e++){let t=document.createElement("button");t.setAttribute("number",e),t.onclick=e=>{promptEntering(e.target.getAttribute("number"))},t.classList.add("chatbtn"),t.innerText=passes.names.toString().split(",")[e-1],chatDiv.appendChild(t)}await api("get"),updateTexts()}var msg={messages:{}},O={};async function api(e="get",t={}){if("put"==e){var s=await(await fetch(url,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();msg=s,lastDataHash=JSON.stringify(s.messages)}else"get"==e&&(msg=O=s=await(await fetch(url)).json(),(s=JSON.stringify(s.messages))!==lastDataHash&&(lastDataHash=s,updateTexts()));"add"==e&&(O=addMessage(t),await api("put",O),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}))}async function updatePasses(){passes=await(await fetch("https://retoolapi.dev/09OX6R/messages/150")).json()}function promptEntering(e){if("yes"!==localStorage["enteredChat"+e]){let t,s=passes.passwords.toString().split(",")[e-1];t=""!==s?btoa(prompt("Enter password...")):"",s==t&&(url="https://retoolapi.dev/09OX6R/messages/"+e,localStorage["enteredChat"+e]="yes",lastDataHash="",api("get"))}else url="https://retoolapi.dev/09OX6R/messages/"+e,lastDataHash="",api("get")}function addMessage(e,t=msg){"object"==typeof t&&null!==t&&t.messages||(t={messages:{}});var s=Object.keys(t.messages);let a=0;for(const e of s)(s=parseInt(e.substring(1)))>a&&(a=s);return{...t,messages:{..."object"==typeof t.messages&&null!==t.messages?t.messages:{},[`m${a+1}`]:e}}}const updatedMessages={messages:{m1:{sender:{user:"Server",time:"0:00 AM"},message:"Chat reset by server admin"}}};async function reset(){let e="by Google Gemini;by ChatGPT;because the devs broke smth;because geese broke into your house;becuase the APs found you;because your computer got isolated for going on furry dating websites;by the Hollow Knight;by Hornet;by Jeffrey Epstein;because Nintendo's suing us twin ü•Ä;by a flock of ferocious furry femboys;because a wild NullReferenceException appeared;because your CPU ran out of elixir;because nobody would join Jarred in Kart Bros;by \"Uncaught TypeError: Cannot read properties of undefined (reading 'reset')\";by sneaky golem in the pocket;by Clippy;by evo skelly nike pro;bc ur chopped twin ü•Äüò≠üò≠üôè".split(";");updatedMessages.messages.m1.message="Chat reset "+e[Math.floor(Math.random()*e.length)],await api("put",updatedMessages)}async function resetAll(){for(var e=123;e<150;e++)url="https://retoolapi.dev/09OX6R/messages/"+e,await reset()}function getTime(){var e=new Date;const t=e.getHours();return`${t%12||12}:${e=e.getMinutes().toString().padStart(2,"0")} ${t>=12?"PM":"AM"}`}function send(){if(""!==document.querySelector("input").value){api("add",{sender:{user:username,time:getTime()},message:document.querySelector("input").value}),document.querySelector("input").value="";let e=document.querySelector("#sendBtn");e.style.background="#262529",e.style.color="#666",e.style.cursor="not-allowed",setTimeout((()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}),1100)}}async function changeName(){var e=Number(url.split("messages/")[1]),t=prompt("Enter new chat name...  (Max length 16 characters, click cancel or press escape to return)");if(null!=t&&""!=t){t=t.substring(0,16);let s=passes.names.toString().split(",");s[e-1]=t,e={names:[s],passwords:[passes.passwords]},t=url,url="https://retoolapi.dev/09OX6R/messages/150",await api("put",e),url=t,location.reload()}}function edit(e,t,s){let a=msg.messages["m"+e];"all"==t&&(a=s),"message"==t&&(a.message=s),"time"==t&&(a.sender.time=s),"user"==t&&(a.sender.user=s),"reactions"==t&&(a.reactions=s),msg.messages["m"+e]=a,api("put",msg),updateTexts()}function updateTexts(){if(msg&&msg.messages){var e=window.scrollY,t=parseInt(url.split("messages/")[1]),s=chatDiv.querySelectorAll("button");for(s[t-1]&&(document.querySelector("h1").innerText=s[t-1].innerText),document.querySelector("#messages").innerHTML="",t=0;t<Object.keys(msg.messages).length;t++){(s=document.createElement("div")).____MID=t+1;let e=msg.messages["m"+(t+1)];if(e){s.style=`\n    position: absolute;\n    top: ${70*t+100}px;\n    ${e.sender.user==username?"right: 50px;":"left: 130px;"}\n    background: ${e.sender.user==username?"#1584ff":"#262529"};\n    color: white;\n    min-height: 40px; \n    border: 1px solid black;\n    display: inline-block;\n    min-width: 35px;\n    max-width: 75%;\n    overflow-wrap: break-word;\n    cursor: default;\n  `,s.oncontextmenu=t=>{try{e=msg.messages["m"+t.target.____MID].sender}catch{return}t.preventDefault();var s=document.createElement("div");s.style="\n      position: fixed;\n      bottom: 20px;\n      height: 40px;\n      left: 140px;\n      width: calc(100% - 225px);\n      border-radius: 12px;\n      background: #262529;\n      border: 1px solid #7c7c7c;\n      color: white;\n      z-index: 10001;\n      padding-left: 8px;\n    ",document.body.appendChild(s);var a=document.createElement("div");a.addEventListener("click",(()=>{document.body.removeChild(s)})),a.style="position: absolute; left: -10000px; top: -10000px; width: 30000px; height: 30000px; background: #0008; z-index: -100;",s.appendChild(a),msg.messages["m"+t.target.____MID].sender.user==username&&((a=document.createElement("button")).onclick=e=>{e=msg.messages["m"+t.target.____MID].message,e=Array.isArray(e)?e[0]:e,null!=(e=prompt("Enter edited message",e))&&""!=e.trim()&&(edit(t.target.____MID,"message",e),document.body.removeChild(s))},a.classList.add("editBtn"),a.innerText="Edit Message",s.appendChild(a));var n="‚ù§Ô∏è üòÇ üëç üëé ‚ùï ‚ùî üêê üòÆ üò° üòù ü§ë ü§î üò≠ ü•Ä üíÄ ‚òπÔ∏è üî• üéâ üôè üñï ü´¶ ü•∑ üëØ‚Äç‚ôÄÔ∏è ü§π‚Äç‚ôÇÔ∏è üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® ü¶≤ üçÜ üçí üßä üïã üåà ‚ö° ‚õÑ üß¢ üìé".split(" ");const r=username,o=msg.messages["m"+t.target.____MID];a=o.reactions?o.reactions[r]:void 0;for(const e of n)(n=document.createElement("button")).innerText=e,n.classList.add("reactBtn"),a===e&&n.classList.add("reactSelected"),n.onclick=()=>{o.reactions||(o.reactions={}),o.reactions[r]===e?delete o.reactions[r]:o.reactions[r]=e,edit(t.target.____MID,"reactions",o.reactions),document.body.removeChild(s)},s.appendChild(n),document.onkeydown=e=>"Escape"==e.key?document.body.removeChild(s):0};var a=(Array.isArray(e.message)?e.message[0]:e.message).replace(/(\b(https?:\/\/[^\s]+|www\.[^\s]+)(\b|$))/g,(e=>{let t=e;return t.startsWith("www.")&&(t="http://"+t),`<a href="${t}" target="_blank" style="color: white; text-decoration: underline;">${e}</a>`}));if(s.innerHTML=a,document.querySelector("#messages").appendChild(s),e.sender.user!=username&&((a=document.createElement("span")).innerText=e.sender.user+", "+e.sender.time,a.style="position: absolute; font-size: 9px; top: -10px; left: 5px; white-space: nowrap; z-index: 9000000000000000;",s.appendChild(a)),e.reactions&&Object.keys(e.reactions).length>0){let t="";for(var n in e.reactions)t=n==username?t+" <span class='myReact'>"+e.reactions[n]+"</span>":t+" "+e.reactions[n];(a=document.createElement("span")).innerHTML=t,a.style=`\n      position: absolute;\n      ${e.sender.user==username?"right":"left"}: ${s.offsetWidth-7.5}px; \n      white-space: nowrap;\n      top: -10px;\n      background: #262529;\n      border-radius: 9px;\n      border: 1px solid white;\n      padding: 1px 4px;\n      `,s.appendChild(a)}}}(n=document.createElement("div")).style=`position: absolute; top: ${70*Object.keys(msg.messages).length+100}px; width: 70%; height: 40px; border: none;`,document.querySelector("#messages").appendChild(n),window.scrollTo({top:e})}}document.onkeypress=e=>{"Enter"==e.key&&send()},setInterval((()=>{let e=document.querySelector("#sendBtn");""==document.querySelector("input").value?(e.style.background="#262529",e.style.color="#666",e.style.cursor="not-allowed"):(e.style.background="#1584ff",e.style.color="white",e.style.cursor="pointer")}),50),init(),setInterval((()=>api("get")),1500),setInterval(updatePasses,5e3)</script><style>input#type{position:fixed;bottom:20px;height:40px;left:140px;width:calc(100% - 205px);border-radius:12px;background:#262529;border:1px solid #7c7c7c;color:#fff;padding-left:8px}.editBtn{position:absolute;top:-30px;left:8.3px;background:#262529;color:#fff;border:1px solid #7c7c7c;border-radius:7px;height:auto;font-size:16px;padding:5px 5px 5px 5px;cursor:pointer}.editBtn:hover{background:#323538}h1{background:#181818;padding:6px 10px 6px 10px;border-radius:10px;display:inline-block;height:37px;border:1px solid #282828;cursor:default}button.reactBtn{width:33px;height:33px;text-align:center;background:#262529;border-radius:9px;border:1px solid #7c7c7c;cursor:pointer;padding:0 4px 0 4px;z-index:10000001;margin-right:4px}button.reactBtn:hover{background:#363539}.reactSelected{background:#1584ff!important}button#nameBtn{position:fixed;top:10px;right:10px;color:#fff;background:#000;border:1px solid #fff;border-radius:6px}button#nameBtn:hover{background:#282828;cursor:pointer}button.chatbtn{display:inline-block;width:75px;height:auto;color:#fff;background:#000;cursor:pointer;font-size:12px;border:1px solid #282828;border-radius:6px;padding:3px 0 3px 0;margin:0 0 4px 0;white-space:normal;word-wrap:break-word;overflow-wrap:break-word}button.chatbtn:hover{background:#222}div#chats{position:fixed;left:0;top:0;border-top:none;border-left:none;border-bottom:none;border-right:5px solid gray;border-radius:0;width:100px;height:100%;overflow-y:scroll}button#sendBtn{position:fixed;bottom:20px;height:40px;right:10px;width:40px;border:1px solid #7c7c7c;border-radius:121px;background:#262529;color:#666;transition:.2s;cursor:default;font-size:17px;padding-top:5px}span.myReact{background:#1584ff;border-radius:5px;display:inline-block;height:21px}.nameplated{position:relative;padding-top:15px}.nameplated::after{position:absolute;z-index:100;left:5px;top:-15px;background-color:#333;color:#fff;padding:1px 5px;border-radius:4px;font-size:10px;white-space:nowrap}body{background:#000;color:#fff}*{font-family:Arial}div{padding:8px;border-radius:10px;--nameplateText:""}</style>